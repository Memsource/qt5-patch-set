From d88001228833d89feba6e91b41de3617a3c8beee Mon Sep 17 00:00:00 2001
From: "michal.lazo" <michal.lazo@memsource.com>
Date: Thu, 15 Feb 2018 10:47:47 +0100
Subject: [PATCH] don't use qtpdf feature if it is disabled

---
 Source/WebCore/platform/graphics/qt/GraphicsContextQt.cpp | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/Source/WebCore/platform/graphics/qt/GraphicsContextQt.cpp b/Source/WebCore/platform/graphics/qt/GraphicsContextQt.cpp
index c9595a1..9cef94c 100644
--- a/Source/WebCore/platform/graphics/qt/GraphicsContextQt.cpp
+++ b/Source/WebCore/platform/graphics/qt/GraphicsContextQt.cpp
@@ -70,7 +70,9 @@
 #include <QVector>
 #include <wtf/MathExtras.h>
 
+#ifndef QT_NO_PDF
 #include <private/qpdf_p.h>
+#endif
 
 #if OS(WINDOWS)
 QT_BEGIN_NAMESPACE
@@ -1567,6 +1569,9 @@ void GraphicsContext::set3DTransform(const TransformationMatrix& transform)
 
 void GraphicsContext::setURLForRect(const KURL& url, const IntRect& rect)
 {
+#ifdef QT_NO_PDF
+    notImplemented();
+#else
 #if QT_VERSION >= QT_VERSION_CHECK(5, 6, 0)
     if (paintingDisabled())
         return;
@@ -1577,6 +1582,7 @@ void GraphicsContext::setURLForRect(const KURL& url, const IntRect& rect)
 #else
     notImplemented();
 #endif
+#endif
 }
 
 void GraphicsContext::setPlatformStrokeColor(const Color& color, ColorSpace colorSpace)
-- 
2.9.2.windows.1