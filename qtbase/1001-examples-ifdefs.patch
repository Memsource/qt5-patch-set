From 85542218a277251d80e0844bf667458095d4cb1f Mon Sep 17 00:00:00 2001
From: "michal.lazo" <michal.lazo@memsource.com>
Date: Mon, 10 Sep 2018 11:00:19 +0200
Subject: [PATCH] examples ifdefs

---
 examples/touch/fingerpaint/scribblearea.cpp             | 2 ++
 examples/widgets/graphicsview/chip/view.cpp             | 2 ++
 examples/widgets/itemviews/pixelator/mainwindow.cpp     | 2 ++
 examples/widgets/itemviews/spreadsheet/spreadsheet.cpp  | 2 ++
 examples/widgets/mainwindows/dockwidgets/mainwindow.cpp | 2 ++
 examples/widgets/richtext/orderform/mainwindow.cpp      | 2 ++
 examples/widgets/richtext/textedit/textedit.cpp         | 4 ++++
 examples/widgets/tutorials/notepad/notepad.pro          | 2 +-
 examples/widgets/widgets/digitalclock/digitalclock.cpp  | 4 ++++
 examples/widgets/widgets/digitalclock/digitalclock.h    | 4 ++++
 examples/widgets/widgets/digitalclock/main.cpp          | 2 ++
 examples/widgets/widgets/imageviewer/imageviewer.cpp    | 2 ++
 examples/widgets/widgets/scribble/scribblearea.cpp      | 2 ++
 examples/widgets/widgets/tetrix/main.cpp                | 2 ++
 examples/widgets/widgets/tetrix/tetrixwindow.cpp        | 3 +++
 examples/widgets/widgets/tetrix/tetrixwindow.h          | 3 +++
 16 files changed, 39 insertions(+), 1 deletion(-)

diff --git a/examples/touch/fingerpaint/scribblearea.cpp b/examples/touch/fingerpaint/scribblearea.cpp
index aa4e60c934..17a8088270 100644
--- a/examples/touch/fingerpaint/scribblearea.cpp
+++ b/examples/touch/fingerpaint/scribblearea.cpp
@@ -170,6 +170,7 @@ void ScribbleArea::resizeImage(QImage *image, const QSize &newSize)
 //! [21]
 void ScribbleArea::print()
 {
+#if defined(QT_PRINTSUPPORT_LIB)
 #if QT_CONFIG(printdialog)
     QPrinter printer(QPrinter::HighResolution);
 
@@ -185,6 +186,7 @@ void ScribbleArea::print()
         painter.drawImage(0, 0, image);
     }
 #endif // QT_CONFIG(printdialog)
+#endif // QT_PRINTSUPPORT_LIB
 }
 //! [22]
 
diff --git a/examples/widgets/graphicsview/chip/view.cpp b/examples/widgets/graphicsview/chip/view.cpp
index 491f1a54cf..25b66529aa 100644
--- a/examples/widgets/graphicsview/chip/view.cpp
+++ b/examples/widgets/graphicsview/chip/view.cpp
@@ -264,6 +264,7 @@ void View::toggleAntialiasing()
 
 void View::print()
 {
+#if defined(QT_PRINTSUPPORT_LIB)
 #if QT_CONFIG(printdialog)
     QPrinter printer;
     QPrintDialog dialog(&printer, this);
@@ -272,6 +273,7 @@ void View::print()
         graphicsView->render(&painter);
     }
 #endif
+#endif
 }
 
 void View::zoomIn(int level)
diff --git a/examples/widgets/itemviews/pixelator/mainwindow.cpp b/examples/widgets/itemviews/pixelator/mainwindow.cpp
index 63617f0169..16f22e2cf9 100644
--- a/examples/widgets/itemviews/pixelator/mainwindow.cpp
+++ b/examples/widgets/itemviews/pixelator/mainwindow.cpp
@@ -167,6 +167,7 @@ void MainWindow::openImage(const QString &fileName)
 
 void MainWindow::printImage()
 {
+#if defined(QT_PRINTSUPPORT_LIB)
 #if QT_CONFIG(printdialog)
     if (model->rowCount(QModelIndex())*model->columnCount(QModelIndex()) > 90000) {
         QMessageBox::StandardButton answer;
@@ -242,6 +243,7 @@ void MainWindow::printImage()
     QMessageBox::information(this, tr("Printing canceled"),
         tr("Printing is not supported on this Qt build"), QMessageBox::Cancel);
 #endif
+#endif
 }
 
 void MainWindow::showAboutBox()
diff --git a/examples/widgets/itemviews/spreadsheet/spreadsheet.cpp b/examples/widgets/itemviews/spreadsheet/spreadsheet.cpp
index 621f655b02..f20f6dd1ce 100644
--- a/examples/widgets/itemviews/spreadsheet/spreadsheet.cpp
+++ b/examples/widgets/itemviews/spreadsheet/spreadsheet.cpp
@@ -642,6 +642,7 @@ QString encode_pos(int row, int col)
 
 void SpreadSheet::print()
 {
+#if defined(QT_PRINTSUPPORT_LIB)
 #if QT_CONFIG(printpreviewdialog)
     QPrinter printer(QPrinter::ScreenResolution);
     QPrintPreviewDialog dlg(&printer);
@@ -650,5 +651,6 @@ void SpreadSheet::print()
     connect(&dlg, &QPrintPreviewDialog::paintRequested, &view, &PrintView::print);
     dlg.exec();
 #endif
+#endif
 }
 
diff --git a/examples/widgets/mainwindows/dockwidgets/mainwindow.cpp b/examples/widgets/mainwindows/dockwidgets/mainwindow.cpp
index 47a6e78265..f3ddf55f0d 100644
--- a/examples/widgets/mainwindows/dockwidgets/mainwindow.cpp
+++ b/examples/widgets/mainwindows/dockwidgets/mainwindow.cpp
@@ -128,6 +128,7 @@ void MainWindow::newLetter()
 //! [3]
 void MainWindow::print()
 {
+#if defined(QT_PRINTSUPPORT_LIB)
 #if QT_CONFIG(printdialog)
     QTextDocument *document = textEdit->document();
     QPrinter printer;
@@ -140,6 +141,7 @@ void MainWindow::print()
     document->print(&printer);
     statusBar()->showMessage(tr("Ready"), 2000);
 #endif
+#endif
 }
 //! [3]
 
diff --git a/examples/widgets/richtext/orderform/mainwindow.cpp b/examples/widgets/richtext/orderform/mainwindow.cpp
index b207ee4dbc..7503d49325 100644
--- a/examples/widgets/richtext/orderform/mainwindow.cpp
+++ b/examples/widgets/richtext/orderform/mainwindow.cpp
@@ -248,6 +248,7 @@ void MainWindow::openDialog()
 //! [17]
 void MainWindow::printFile()
 {
+#if defined(QT_PRINTSUPPORT_LIB)
 #if QT_CONFIG(printdialog)
     QTextEdit *editor = static_cast<QTextEdit*>(letters->currentWidget());
 //! [18]
@@ -264,5 +265,6 @@ void MainWindow::printFile()
 
     editor->print(&printer);
 #endif
+#endif
 }
 //! [17]
diff --git a/examples/widgets/richtext/textedit/textedit.cpp b/examples/widgets/richtext/textedit/textedit.cpp
index fe4ee4f499..860b1d6b0e 100644
--- a/examples/widgets/richtext/textedit/textedit.cpp
+++ b/examples/widgets/richtext/textedit/textedit.cpp
@@ -481,6 +481,7 @@ bool TextEdit::fileSaveAs()
 
 void TextEdit::filePrint()
 {
+#if defined(QT_PRINTSUPPORT_LIB)
 #if QT_CONFIG(printdialog)
     QPrinter printer(QPrinter::HighResolution);
     QPrintDialog *dlg = new QPrintDialog(&printer, this);
@@ -491,16 +492,19 @@ void TextEdit::filePrint()
         textEdit->print(&printer);
     delete dlg;
 #endif
+#endif
 }
 
 void TextEdit::filePrintPreview()
 {
+#if defined(QT_PRINTSUPPORT_LIB)
 #if QT_CONFIG(printpreviewdialog)
     QPrinter printer(QPrinter::HighResolution);
     QPrintPreviewDialog preview(&printer, this);
     connect(&preview, &QPrintPreviewDialog::paintRequested, this, &TextEdit::printPreview);
     preview.exec();
 #endif
+#endif
 }
 
 void TextEdit::printPreview(QPrinter *printer)
diff --git a/examples/widgets/tutorials/notepad/notepad.pro b/examples/widgets/tutorials/notepad/notepad.pro
index 6451f22735..3a2cfe9439 100644
--- a/examples/widgets/tutorials/notepad/notepad.pro
+++ b/examples/widgets/tutorials/notepad/notepad.pro
@@ -1,7 +1,7 @@
 TEMPLATE = app
 TARGET = notepad
 
-qtHaveModule(printsupport): QT += printsupport
+#qtHaveModule(printsupport): QT += printsupport
 requires(qtConfig(fontdialog))
 
 SOURCES += \
diff --git a/examples/widgets/widgets/digitalclock/digitalclock.cpp b/examples/widgets/widgets/digitalclock/digitalclock.cpp
index dec7e64fc3..7bee52ccae 100644
--- a/examples/widgets/widgets/digitalclock/digitalclock.cpp
+++ b/examples/widgets/widgets/digitalclock/digitalclock.cpp
@@ -52,6 +52,8 @@
 
 #include "digitalclock.h"
 
+#if QT_CONFIG(lcdnumber)
+
 //! [0]
 DigitalClock::DigitalClock(QWidget *parent)
     : QLCDNumber(parent)
@@ -80,3 +82,5 @@ void DigitalClock::showTime()
     display(text);
 }
 //! [2]
+
+#endif
diff --git a/examples/widgets/widgets/digitalclock/digitalclock.h b/examples/widgets/widgets/digitalclock/digitalclock.h
index 4365b965bf..a8147e457e 100644
--- a/examples/widgets/widgets/digitalclock/digitalclock.h
+++ b/examples/widgets/widgets/digitalclock/digitalclock.h
@@ -51,6 +51,8 @@
 #ifndef DIGITALCLOCK_H
 #define DIGITALCLOCK_H
 
+#if QT_CONFIG(lcdnumber)
+
 #include <QLCDNumber>
 
 //! [0]
@@ -67,3 +69,5 @@ private slots:
 //! [0]
 
 #endif
+
+#endif
diff --git a/examples/widgets/widgets/digitalclock/main.cpp b/examples/widgets/widgets/digitalclock/main.cpp
index 9440a81c91..b61f6adbc2 100644
--- a/examples/widgets/widgets/digitalclock/main.cpp
+++ b/examples/widgets/widgets/digitalclock/main.cpp
@@ -55,7 +55,9 @@
 int main(int argc, char *argv[])
 {
     QApplication app(argc, argv);
+#if QT_CONFIG(lcdnumber)
     DigitalClock clock;
     clock.show();
+#endif
     return app.exec();
 }
diff --git a/examples/widgets/widgets/imageviewer/imageviewer.cpp b/examples/widgets/widgets/imageviewer/imageviewer.cpp
index 327abf7e43..8f6d73dc68 100644
--- a/examples/widgets/widgets/imageviewer/imageviewer.cpp
+++ b/examples/widgets/widgets/imageviewer/imageviewer.cpp
@@ -183,6 +183,7 @@ void ImageViewer::print()
 //! [5] //! [6]
 {
     Q_ASSERT(imageLabel->pixmap());
+#if defined(QT_PRINTSUPPORT_LIB)
 #if QT_CONFIG(printdialog)
 //! [6] //! [7]
     QPrintDialog dialog(&printer, this);
@@ -197,6 +198,7 @@ void ImageViewer::print()
         painter.drawPixmap(0, 0, *imageLabel->pixmap());
     }
 #endif
+#endif
 }
 //! [8]
 
diff --git a/examples/widgets/widgets/scribble/scribblearea.cpp b/examples/widgets/widgets/scribble/scribblearea.cpp
index d32a29697b..f55c189e76 100644
--- a/examples/widgets/widgets/scribble/scribblearea.cpp
+++ b/examples/widgets/widgets/scribble/scribblearea.cpp
@@ -213,6 +213,7 @@ void ScribbleArea::resizeImage(QImage *image, const QSize &newSize)
 //! [21]
 void ScribbleArea::print()
 {
+#if defined(QT_PRINTSUPPORT_LIB)
 #if QT_CONFIG(printdialog)
     QPrinter printer(QPrinter::HighResolution);
 
@@ -228,5 +229,6 @@ void ScribbleArea::print()
         painter.drawImage(0, 0, image);
     }
 #endif // QT_CONFIG(printdialog)
+#endif // QT_PRINTSUPPORT_LIB
 }
 //! [22]
diff --git a/examples/widgets/widgets/tetrix/main.cpp b/examples/widgets/widgets/tetrix/main.cpp
index 2698190e76..04096fdc6e 100644
--- a/examples/widgets/widgets/tetrix/main.cpp
+++ b/examples/widgets/widgets/tetrix/main.cpp
@@ -57,7 +57,9 @@
 int main(int argc, char *argv[])
 {
     QApplication app(argc, argv);
+#if QT_CONFIG(lcdnumber)
     TetrixWindow window;
     window.show();
+#endif
     return app.exec();
 }
diff --git a/examples/widgets/widgets/tetrix/tetrixwindow.cpp b/examples/widgets/widgets/tetrix/tetrixwindow.cpp
index 43fbdcdea8..98f6f5a072 100644
--- a/examples/widgets/widgets/tetrix/tetrixwindow.cpp
+++ b/examples/widgets/widgets/tetrix/tetrixwindow.cpp
@@ -53,6 +53,7 @@
 #include "tetrixboard.h"
 #include "tetrixwindow.h"
 
+#if QT_CONFIG(lcdnumber)
 //! [0]
 TetrixWindow::TetrixWindow()
 {
@@ -123,3 +124,5 @@ QLabel *TetrixWindow::createLabel(const QString &text)
 }
 //! [7]
 
+#endif
+
diff --git a/examples/widgets/widgets/tetrix/tetrixwindow.h b/examples/widgets/widgets/tetrix/tetrixwindow.h
index a21cef2ecf..a8c406e6ad 100644
--- a/examples/widgets/widgets/tetrix/tetrixwindow.h
+++ b/examples/widgets/widgets/tetrix/tetrixwindow.h
@@ -54,6 +54,8 @@
 #include <QFrame>
 #include <QWidget>
 
+#if QT_CONFIG(lcdnumber)
+
 QT_BEGIN_NAMESPACE
 class QLCDNumber;
 class QLabel;
@@ -82,5 +84,6 @@ private:
     QPushButton *pauseButton;
 };
 //! [0]
+#endif
 
 #endif
-- 
2.18.0.windows.1

